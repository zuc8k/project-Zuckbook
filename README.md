# ๐ APVP Online - ุชูุฑูุฑ ุงูููุงุฆู ุงูุดุงูู

## โ ูุง ุชู ุฅูุฌุงุฒู:

### 1๏ธโฃ ุชุญููู ุดุงูู ููููุฏ ุงูุฃุตูู
```
โ ุชุญุฏูุฏ ุฌููุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
โ ุชุญููู ุงูุฃุฎุทุงุก ุงูุญุฑุฌุฉ
โ ููู ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ODBC
โ ุชุชุจุน ุณุจุจ ุงูุตูุญุฉ ุงูุจูุถุงุก
```

---

## ๐ ุงููุชุบูุฑุงุช ุงูููุชุดูุฉ:

### ูุงุนุฏุฉ ุงูุจูุงูุงุช (mod/inc/config.php):
```
DATABASE CONNECTION:
โโ $host     = "ARABPVPERS-VPS\SQLEXPRESS"  (SQL Server Instance)
โโ $user     = "sa"                          (Database User)
โโ $pass     = "sql@123"                     (Database Password)
โโ $db       = "SRO_VT_SHARD"                (Shard Database)
โโ $db2      = "SRO_VT_ACCOUNT"              (Account Database)
```

### ุฎุงุฏู Silkroad:
```
SERVER SETTINGS:
โโ $ServerIP   = "127.0.0.1"                 (Gateway IP)
โโ $ServerPort = "15779"                     (Gateway Port)
โโ $slot       = "1000"                      (Max Players)
```

### ุงููููุน:
```
WEBSITE CONFIG:
โโ $webtitle = "APVP Online"                 (ุงุณู ุงููููุน)
โโ $email    = "Ch3tos@Facebook.com"         (ุงูุจุฑูุฏ ุงูุฅููุชุฑููู)
```

---

## ๐ด ุงููุดุงูู ุงูููุชุดูุฉ ูุงูุญููู:

### ุงููุดููุฉ ุงูุฃููู: ุงูุตูุญุฉ ุงูุจูุถุงุก
```
ุงูุณุจุจ ุงูุฌุฐุฑู:
โโ connect.php ุงุณุชุฎุฏูุช die() ุนูุฏ ูุดู ODBC
   โโ ูููู ุงูุชุทุจูู ุจุฏูู ุฅุฑุณุงู HTML
   โโ error_reporting(0) ูุฎูู ุงูุฑุณุงุฆู
   โโ ุงููุณุชุฎุฏู ูุฑู ุตูุญุฉ ูุงุฑุบุฉ ุชูุงูุงู

ุงูุญู ุงูุดุงูู:
โโ ุงุณุชุจุฏุงู die() ุจู safe_odbc_connect()
โโ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจู try/catch
โโ ุชุฎุฒูู ุงูุฃุฎุทุงุก ูู session
โโ ุนุฑุถ ุตูุญุฉ ุตูุงูุฉ ุงุญุชุฑุงููุฉ
โโ ุนุฏู ุฅููุงู ุงูุจุฑูุงูุฌ ุจููุฉ
```

### ุงููุดููุฉ ุงูุซุงููุฉ: ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ุฃุฎุทุงุก
```
ุงูุญู:
โโ ูุญุฑุฑ ุฃุฎุทุงุก ุดุงูู (error_handler.php)
โโ ุชุณุฌูู ุงูุฃุฎุทุงุก (error logging)
โโ ุฏุนู debug mode
โโ ุตูุญุฉ ุตูุงูุฉ ุฌูููุฉ
```

### ุงููุดููุฉ ุงูุซุงูุซุฉ: ุนุฏู ูุฌูุฏ Environment Separation
```
ุงูุญู:
โโ index-debug.php (ููุชุทููุฑ)
โโ index-production.php (ููุฅูุชุงุฌ)
โโ ูุชุบูุฑ DEV_MODE ุจูุฆู
โโ ุฑุณุงุฆู ูุฎุชููุฉ ุญุณุจ ุงูุจูุฆุฉ
```

---

## ๐๏ธ ุงููููุงุช ุงููุญุฏุซุฉ ูุงูุฌุฏูุฏุฉ:

### โ๏ธ ุชู ุชุญุฏูุซูุง:

#### 1. **mod/inc/config.php** (ููุญุณููุฉ)
```php
ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
โ ูุตูููุงุช ููุธูุฉ ($DATABASE, $SERVER, $SITE)
โ ุจูุงูุงุช ุจูุฆุฉ (ENV)
โ backward compatibility ูุน ุงููุฏูู
โ ุชุนูููุงุช ุดุงููุฉ
```

#### 2. **mod/inc/connect.php** (ุขููุฉ ุชูุงูุงู)
```php
ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
โ ุฏุงูุฉ safe_odbc_connect()
โ ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก
โ ุชุฎุฒูู ุงูุฃุฎุทุงุก ูู session
โ ุฏุนู debug logging
โ ูุง ุชุณุชุฎุฏู die() ุนูุฏ ุงูุฎุทุฃ
```

#### 3. **index.php** (ูุญุณููุฉ)
```php
ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
โ DEV_MODE detection
โ try/catch blocks
โ ูุญุต ุงูุฃุฎุทุงุก
โ ุงุณุชุฏุนุงุก error_handler ุนูุฏ ุงูุญุงุฌุฉ
โ ุชุนูููุงุช ูุงุถุญุฉ
```

---

### ๐ ุชู ุฅูุดุงุคูุง:

#### 1. **mod/inc/error_handler.php**
```php
ูููุฑ:
โ ุตูุญุฉ ุตูุงูุฉ ุงุญุชุฑุงููุฉ
โ ุนุฑุถ ุงูุฃุฎุทุงุก ูู debug
โ ุฅุฎูุงุก ุงูุฃุฎุทุงุก ูู production
โ ุฑุณุงุฆู ูุฏูุฉ ูููุณุชุฎุฏู
```

#### 2. **index-debug.php**
```php
ููุชุทููุฑ:
โ ุนุฑุถ ุฌููุน ุงูุฃุฎุทุงุก
โ ูุนูููุงุช ODBC ุงููุงููุฉ
โ debug variables ูุฑุฆูุฉ
โ error logging ูุดุท
```

#### 3. **index-production.php**
```php
ููุฅูุชุงุฌ:
โ ุฃุฎุทุงุก ูุฎููุฉ
โ ุฑุณุงุฆู ูุฏูุฉ ููุท
โ ูุง ูุนูููุงุช ุญุณุงุณุฉ
โ ุตูุญุฉ ุตูุงูุฉ ุงุญุชุฑุงููุฉ
```

#### 4. **index-emergency.php**
```php
ูู ุญุงูุฉ ุงูุทูุงุฑุฆ:
โ ุตูุญุฉ ุตูุงูุฉ ุฌูููุฉ
โ ูุญุงููุฉ ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆูุฉ
โ ุฑูุงุจุท ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ
โ debug info ุงุฎุชูุงุฑูุฉ
```

#### 5. **health-check.php**
```php
ููุชุดุฎูุต:
โ ูุญุต PHP ูุงูุชุฏุงุฏุงุช
โ ุงูุชุญูู ูู ุงููููุงุช ุงููุทููุจุฉ
โ ุงุฎุชุจุงุฑ ุงูุงุชุตุงูุงุช ุจู ODBC
โ ูุนูููุงุช ุงูุฎุงุฏู
โ ุชูุฑูุฑ ุดุงูู
```

#### 6. **ANALYSIS_AR.md**
```
ุชุญููู ุดุงูู ุจุงูุนุฑุจูุฉ:
โ ุดุฑุญ ูุงูู ูููุดุงูู
โ ุงูุญููู ูุงูุชุญุณููุงุช
โ ุฃูุซูุฉ ูู ุงูููุฏ
โ ูุตุงุฆุญ ุฃูุงู
```

#### 7. **ANALYSIS_EN.md**
```
ุชุญููู ุดุงูู ุจุงูุฅูุฌููุฒูุฉ:
โ ููุณ ุงููุญุชูู ุจุงูุฅูุฌููุฒูุฉ
โ ุฑูุงุจุท ูููุฏุฉ
โ ุฃูุงูุฑ ุงุฎุชุจุงุฑ
โ troubleshooting guide
```

#### 8. **QUICKSTART.md**
```
ุฏููู ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ:
โ ุฎุทูุงุช ุงูุชุซุจูุช
โ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ
โ ุชุนูููุงุช ุงูุชูุนูู
โ ูุงุฆูุฉ ุชุญูู
```

#### 9. **INDEX_STRUCTURE.md**
```
ุดุฑุญ ุงููููู:
โ ููููุฉ ุชูุธูู ุงููููุงุช
โ ุชุฏูู ุงูุจูุงูุงุช
โ ููุงุท ุงูุชูุงูู
```

---

## ๐ฏ ุงูุญู ุงููุงูู ูููุดููุฉ ุงูุฑุฆูุณูุฉ:

### ูุจู (ุงูุตูุญุฉ ุงูุจูุถุงุก):
```
User Request
    โ
index.php loads
    โ
include connect.php
    โ
odbc_connect() fails
    โ
die("error")  โ ุชููู ููุฑู!
    โ
Browser receives nothing
    โ
โ WHITE PAGE
```

### ุจุนุฏ (ุตูุญุฉ ุตูุงูุฉ ุฌูููุฉ):
```
User Request
    โ
index.php loads
    โ
include config.php โ
    โ
include connect.php
    โ
safe_odbc_connect()
    โ
Connection fails?
    โโ YES: Store error in session โ
    โ       Return status โ
    โ       Don't die() โ
    โ
    โโ NO: Continue normally โ
    โ
Check database_error flag
    โโ YES: Call displayDatabaseError() โ
    โ       Show maintenance page โ
    โ
    โโ NO: Load page.php normally โ
    โ
โ USER SEES PROFESSIONAL MESSAGE (not white page!)
```

---

## ๐ ุงูุชุซุจูุช ูุงูุงุณุชุฎุฏุงู:

### ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุชุญ ูู ุงููุชุตูุญ:
http://localhost/health-check.php

# ูุฌุจ ุฃู ุชุฑู ุชูุฑูุฑ ุดุงูู ุนู ุญุงูุฉ ุงููุธุงู
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ODBC
```bash
# ุงูุงุฎุชุจุงุฑ ุงููุฏูู ุงูุจุณูุท:
php -r "
    include('mod/inc/config.php');
    \$conn = odbc_connect('Driver={SQL Server};Server={\$host};Database={\$db}', \$user, \$pass);
    if (\$conn) echo 'Connected!';
    else echo odbc_errormsg();
"
```

### ุงูุฎุทูุฉ 3: ุงุฎุชูุงุฑ ุงููุณุฎุฉ
```bash
# ููุชุทููุฑ (ุนุฑุถ ุงูุฃุฎุทุงุก):
cd C:\xampp\htdocs
copy index.php index-production.php
copy index-debug.php index.php

# ููุฅูุชุงุฌ (ุฅุฎูุงุก ุงูุฃุฎุทุงุก):
cd C:\xampp\htdocs
copy index.php index-debug.php
copy index-production.php index.php
```

### ุงูุฎุทูุฉ 4: ุงูุงุฎุชุจุงุฑ ุงูููุงุฆู
```bash
# ูู ุงููุชุตูุญ:
http://localhost/              # ุงููููุน ุงูุฑุฆูุณู
http://localhost/health-check.php    # ูุญุต ุงูุตุญุฉ
http://localhost/?debug=1      # ูุนูููุงุช debug (ุฅู ูุงูุช ูุชุงุญุฉ)
```

---

## โจ ุงููููุฒุงุช ุงูุฅุถุงููุฉ:

### 1. Backward Compatibility
```php
// ุงูููุฏ ุงููุฏูู ูุนูู 100%:
echo $host;          // ูู $DATABASE['host']
echo $ServerIP;      // ูู $SERVER['ip']
$connectshard;       // ุงูุงุชุตุงู ุงูุขูู ุงูุฌุฏูุฏ
$connectacc;         // ุงูุงุชุตุงู ุงูุขูู ุงูุฌุฏูุฏ
```

### 2. Environment Variables
```php
// ุชุญุฏูุฏ ุงูุจูุฆุฉ:
putenv('DEV_MODE=true');    // Debug
putenv('DEV_MODE=false');   // Production
```

### 3. Error Logging
```php
// ุชุณุฌูู ุงูุฃุฎุทุงุก:
// Linux: /var/log/php_error.log
// Windows: C:\xampp\php\logs\php_error_log
// ุฃู: C:\xampp\apache\logs\error.log
```

### 4. Session Storage
```php
// ุงูุฃุฎุทุงุก ูุฎุฒูุฉ ูู session:
$_SESSION['db_connected']     // ุญุงูุฉ ุงูุงุชุตุงู
$_SESSION['database_error']   // ูู ููุงู ุฎุทุฃ
$_SESSION['debug_errors']     // ุงูุฃุฎุทุงุก ุงููุนููุฉ
```

---

## ๐ ููุงุฑูุฉ ุดุงููุฉ:

| ุงูููุฒุฉ | ุงููุฏูู | ุงูุฌุฏูุฏ |
|--------|--------|--------|
| **ุงูุตูุญุฉ ุงูุจูุถุงุก** | โ ุดุงุฆุนุฉ | โ ุชู ุญููุง |
| **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** | โ ูุง ุชูุฌุฏ | โ ุดุงููุฉ |
| **Debug Mode** | โ ุบูุฑ ูุชุงุญ | โ ูุชุงุญ ุจุณูููุฉ |
| **Configuration** | โ ููุถููุฉ | โ ููุธูุฉ |
| **Error Logging** | โ ูุนุทู | โ ูุดุท |
| **ุงูุฃูุงู** | โ๏ธ ุถุนูู | โ ุฃูุถู |
| **Docs** | โ ูุง ุชูุฌุฏ | โ ุดุงููุฉ |
| **ุชูุงูููุฉ ูุฏููุฉ** | - | โ 100% |

---

## ๐งช ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ:

```
โ ุงุฎุชุจุฑุช ODBC (health-check.php)
โ ุงููููุน ูุญูู ุจุดูู ุทุจูุนู
โ ุงูุฃุฎุทุงุก ุชุนุฑุถ ุตูุญุฉ ุตูุงูุฉ (ูุง ุตูุญุฉ ุจูุถุงุก)
โ Debug mode ูุนุฑุถ ุงูุชูุงุตูู ุงููุงููุฉ
โ Production mode ูุฎูู ุงูุฃุฎุทุงุก
โ page.php ุชุนูู ุจุดูู ุตุญูุญ
โ ุฌููุน ุงููุชุบูุฑุงุช ุงููุฏููุฉ ุชุนูู
โ ุงูุตูุฑ ุชุญูู ุจุดูู ุทุจูุนู
โ ุงูู JavaScript ูุนูู ุจุฏูู ุฃุฎุทุงุก
โ ุงููุงูุฐุฉ ุงูููุจุซูุฉ ุชุนูู ุจุดูู ุตุญูุญ
```

---

## ๐ ุงููููุงุช ุงููุฑุฌุนูุฉ:

```
๐ ANALYSIS_AR.md         โ ุชุญููู ุชูุตููู ุจุงูุนุฑุจูุฉ
๐ ANALYSIS_EN.md         โ ุชุญููู ุชูุตููู ุจุงูุฅูุฌููุฒูุฉ
๐ QUICKSTART.md          โ ุฏููู ุงูุจุฏุงูุฉ ุงูุณุฑูุนุฉ
๐ README.md              โ ูุฐุง ุงูููู
๐ง health-check.php       โ ุฃุฏุงุฉ ุชุดุฎูุต ุดุงููุฉ
๐ง test-db.php            โ ุงุฎุชุจุงุฑ ODBC (ุงุฎุชูุงุฑู)
```

---

## โ๏ธ ููุงุท ูููุฉ:

### ุงูุฃูุงู:
```
โ๏ธ ุชุญุฐูุฑ: ุจูุงูุงุช ุงูุงุนุชูุงุฏ ููุชูุจุฉ ูู ุงูููุฏ!
ุงูุญู: ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุฃู .env file
```

### ุงููุชุทูุจุงุช:
```
โ PHP 7.0+
โ ODBC Extension
โ SQL Server Native Client
โ SQL Server 2008+
```

### ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:
```
โ ุชู ุญูุธ index.php ุงูุฃุตูู ูู index.php.bak
โ ุญูุธ ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ ูู index-*.php
โ ููููู ุงูุฑุฌูุน ููุฃุตูู ุจุณูููุฉ
```

---

## ๐ ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ:

1. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูููุฉ ุฌุฏุงู**
   - ูุง ุชุณุชุฎุฏู `die()` ูู ููุชุตู ุงูุชุทุจูู
   - ุงุณุชุฎุฏู try/catch ูุน error logging

2. **Environment Separation ุถุฑูุฑู**
   - Development โ Production
   - ุฑุณุงุฆู ุงูุฎุทุฃ ุชุณุงุนุฏ ุงูุชุทููุฑ ููุท

3. **ุงููุณุชุฎุฏููู ูุณุชุญููู ุฑุณุงุฆู ูุงุถุญุฉ**
   - ุงูุตูุญุฉ ุงูุจูุถุงุก = ุณูุฆุฉ ุงูุชุฌุฑุจุฉ
   - ุฑุณุงูุฉ ุตูุงูุฉ ูุงุถุญุฉ = ุณููู ุงุญุชุฑุงูู

4. **ุงูุชูุซูู ุถุฑูุฑู**
   - ุงูููุฏ ุงูุฌูุฏ ุจุฏูู ุชูุซูู = ุนุฏูู ุงููุงุฆุฏุฉ
   - ูุซูู ูู ุดูุก ุจูุถูุญ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ:

### ุฅุฐุง ูุงุฌูุช ูุดููุฉ:

1. **ุงูุฑุฃ ุงููุณุชูุฏุงุช:**
   - QUICKSTART.md (ุฏููู ุณุฑูุน)
   - ANALYSIS_AR.md ุฃู ANALYSIS_EN.md (ุชูุงุตูู)

2. **ุดุบูู health-check.php:**
   - http://localhost/health-check.php
   - ุดุงูุฏ ุงูุชูุฑูุฑ ุงูุดุงูู

3. **ุดุบูู ุจู Debug mode:**
   - ุงุณุชุฎุฏู index-debug.php
   - ุดุงูุฏ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุงููุฉ

4. **ุชุญูู ูู ุงูุณุฌูุงุช:**
   - PHP Error Log
   - Apache Error Log
   - Windows Event Viewer

---

## ๐ ุงูุฎูุงุตุฉ:

```
โ ุชู ุชุญููู ุงูููุฏ ุงููุงูู
โ ุชู ุชุญุฏูุฏ ุฌููุน ุงููุดุงูู
โ ุชู ุฅูุดุงุก ุญููู ุดุงููุฉ
โ ุชู ุงุฎุชุจุงุฑ ุงูุญููู
โ ุชู ุชูุซูู ูู ุดูุก
โ ุชู ุงูุญูุงุธ ุนูู ุงูุชูุงูููุฉ
โ ูููุน APVP ุฌุงูุฒ ููุนูู!
```

---

**ุชู ุฅุนุฏุงุฏ ูุฐุง ุงูุชูุฑูุฑ ุจุนูุงูุฉ ูุงุฆูุฉ**
**ุงููุณุฎุฉ: 2.0**
**ุงูุชุงุฑูุฎ: 8 ูุจุฑุงูุฑ 2026**
**ุงูุญุงูุฉ: โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู**

